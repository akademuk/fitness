document.addEventListener("DOMContentLoaded",()=>{const e=e=>new Promise((t,o)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const r=document.createElement("script");r.src=e,r.onload=t,r.onerror=o,document.body.appendChild(r)}),t=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2});t.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{t.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);new Swiper(".hero-slider",{effect:"fade",speed:1500,autoplay:{delay:6e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{slideChangeTransitionStart:function(){const e=this.slides[this.activeIndex],t=e.querySelector("img");gsap.fromTo(t,{scale:1.2},{scale:1,duration:6,ease:"power1.out"});const o=e.querySelector(".hero-title"),r=e.querySelector(".hero-subtitle");gsap.fromTo([o,r],{y:50,opacity:0},{y:0,opacity:1,duration:1,stagger:.2,ease:"power3.out",delay:.5})}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}}});setTimeout(()=>{requestAnimationFrame(()=>{gsap.registerPlugin(ScrollTrigger);try{new SplitType("[data-split-text]",{types:"words, chars"});document.querySelectorAll("[data-split-text]").forEach(e=>{const t=e.querySelectorAll(".char");t.length>0&&gsap.from(t,{scrollTrigger:{trigger:e,start:"top 80%",toggleActions:"play none none reverse"},y:100,opacity:0,rotation:5,duration:.8,stagger:.02,ease:"back.out(1.7)"})})}catch(e){console.warn("SplitType failed to initialize",e)}ScrollTrigger.refresh();document.querySelectorAll("[data-reveal]").forEach(e=>{gsap.fromTo(e,{y:50,opacity:0},{y:0,opacity:1,duration:1,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none reverse"}})});document.querySelectorAll(".advantages__list").forEach(e=>{const t=e.querySelectorAll(".advantage-item");gsap.fromTo(t,{x:-50,opacity:0},{x:0,opacity:1,duration:.8,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:e,start:"top 80%"}})});document.querySelectorAll("[data-parallax-image] img").forEach(e=>{gsap.to(e,{yPercent:-20,ease:"none",scrollTrigger:{trigger:e.parentElement,start:"top bottom",end:"bottom top",scrub:!0}})}),window.innerWidth>1024&&gsap.to(".services__grid .service-card:nth-child(2)",{y:-50,ease:"none",scrollTrigger:{trigger:".services__grid",start:"top bottom",end:"bottom top",scrub:1}})})},100);const o=document.querySelector(".hamburger"),r=document.querySelector(".nav"),s=document.querySelectorAll(".nav__link"),a=document.querySelector(".nav__cta");o&&r&&(o.addEventListener("click",()=>{const e="true"===o.getAttribute("aria-expanded");o.setAttribute("aria-expanded",!e),e?(r.classList.remove("active"),t.start()):(r.classList.add("active"),t.stop(),gsap.fromTo(".nav__link",{y:50,opacity:0},{y:0,opacity:1,duration:.8,stagger:.1,ease:"power3.out",delay:.2}),gsap.fromTo([".nav__contact",".nav__social",".nav__cta"],{y:30,opacity:0},{y:0,opacity:1,duration:.8,stagger:.1,ease:"power3.out",delay:.6}))}),s.forEach(e=>{e.addEventListener("click",()=>{window.innerWidth<1024&&(o.setAttribute("aria-expanded","false"),r.classList.remove("active"),t.start())})}),a&&a.addEventListener("click",()=>{window.innerWidth<1024&&(o.setAttribute("aria-expanded","false"),r.classList.remove("active"),t.start())}));const n=document.querySelector(".header");let i=!1;t.on("scroll",e=>{const t=e.scroll>50;t!==i&&(i=t,i?n.classList.add("header--scrolled"):n.classList.remove("header--scrolled"))}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const s=this.getAttribute("href");if("#"===s)return;const a=document.querySelector(s);a&&(t.scrollTo(a,{duration:2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e))}),window.innerWidth<1024&&o&&r&&(o.setAttribute("aria-expanded","false"),r.classList.remove("active"),t.start()))})});const c=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(e("assets/vendor/js/fancybox.umd.js").then(()=>{Fancybox.bind("[data-fancybox]",{animated:!0,showClass:"f-fadeIn",hideClass:"f-fadeOut",dragToClose:!1,Hash:!1,Images:{zoom:!1},Toolbar:{display:{left:[],middle:[],right:["close"]}},Thumbs:{autoStart:!1},on:{close:()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()}}})}).catch(e=>console.error("Failed to load Fancybox",e)),c.disconnect())})},{rootMargin:"500px"}),l=document.querySelector("#gallery"),d=document.querySelector(".testimonials");l&&c.observe(l),d&&c.observe(d);const u=document.getElementById("booking");if(u){const t=new IntersectionObserver(o=>{if(o[0].isIntersecting){const o=document.getElementById("phone");o&&e("assets/vendor/js/imask.js").then(()=>{IMask(o,{mask:"+{380} (00) 000-00-00",lazy:!1,placeholderChar:"_"})}).catch(e=>console.error("Failed to load IMask",e)),t.disconnect()}},{rootMargin:"200px"});t.observe(u)}const m=document.querySelector(".custom-select"),p=document.querySelector(".form__select-native");if(m&&p){const e=m.querySelector(".custom-select__trigger"),t=m.querySelectorAll(".custom-select__option"),o=m.querySelector(".custom-select__text");e.addEventListener("click",()=>{m.classList.toggle("open")}),t.forEach(e=>{e.addEventListener("click",()=>{const r=e.getAttribute("data-value"),s=e.textContent;o.textContent=s,m.classList.remove("open"),m.classList.add("has-value"),p.value=r,t.forEach(e=>e.classList.remove("selected")),e.classList.add("selected")})}),document.addEventListener("click",e=>{m.contains(e.target)||m.classList.remove("open")})}const g=document.querySelector(".fab-btn"),y=document.querySelector(".hero");if(g&&y){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?g.classList.remove("visible"):g.classList.add("visible")})},{threshold:0}).observe(y)}document.querySelectorAll(".gallery-item").forEach((e,t)=>{gsap.fromTo(e,{opacity:0,y:50,scale:.95},{opacity:1,y:0,scale:1,duration:.8,delay:.1*t,ease:"power2.out",scrollTrigger:{trigger:".gallery-mosaic",start:"top 80%"}})});const v=document.getElementById("booking-form");let h;v&&v.addEventListener("submit",e=>{e.preventDefault();const t=v.querySelector('button[type="submit"]'),o=t.textContent;t.textContent="Sending...",t.disabled=!0,setTimeout(()=>{t.textContent=o,t.disabled=!1,Fancybox.show([{src:"#thank-you-popup",type:"inline",closeButton:!1}]),v.reset();const e=document.querySelector(".custom-select"),r=document.querySelector(".custom-select__text"),s=document.querySelectorAll(".custom-select__option");e&&r&&(r.textContent="",e.classList.remove("has-value"),s.forEach(e=>e.classList.remove("selected")))},1500)}),window.addEventListener("resize",()=>{document.body.classList.add("resize-animation-stopper"),clearTimeout(h),h=setTimeout(()=>{document.body.classList.remove("resize-animation-stopper")},400)})});